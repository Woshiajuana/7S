(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b11c676","chunk-2d2080eb","chunk-2d0c95c6"],{"3b2b":function(e,t,r){var a=r("7726"),n=r("5dbc"),o=r("86cc").f,l=r("9093").f,i=r("aae3"),s=r("0bfb"),c=a.RegExp,u=c,d=c.prototype,p=/a/g,f=/a/g,b=new c(p)!==p;if(r("9e1e")&&(!b||r("79e5")((function(){return f[r("2b4c")("match")]=!1,c(p)!=p||c(f)==f||"/a/i"!=c(p,"i")})))){c=function(e,t){var r=this instanceof c,a=i(e),o=void 0===t;return!r&&a&&e.constructor===c&&o?e:n(b?new u(a&&!o?e.source:e,t):u((a=e instanceof c)?e.source:e,a&&o?s.call(e):t),r?this:d,c)};for(var m=function(e){e in c||o(c,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},h=l(u),g=0;h.length>g;)m(h[g++]);d.constructor=c,c.prototype=d,r("2aba")(a,"RegExp",c)}r("7a56")("RegExp")},"598d":function(e,t,r){"use strict";r.r(t);var a=function(){return{arrTable:[],objQuery:{isLoading:!1},objFilterForm:{keyword:{value:"",placeholder:"请输入标题/路径",style:"width: 200px; margin-right: 5px;",mode:"input",event:"filter"}},arrFilterButton:[{text:"查询",loading:!1,type:"primary",icon:"el-icon-search",event:"filter"},{text:"新增",type:"primary",icon:"el-icon-plus",event:"add"}],tableData:[{id:1,date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{id:2,date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{id:3,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄",children:[{id:31,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{id:32,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"}]},{id:4,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}]}};t["default"]={data:a}},"5dbc":function(e,t,r){var a=r("d3f4"),n=r("8b97").set;e.exports=function(e,t,r){var o,l=t.constructor;return l!==r&&"function"==typeof l&&(o=l.prototype)!==r.prototype&&a(o)&&n&&n(e,o),e}},"8b97":function(e,t,r){var a=r("d3f4"),n=r("cb7c"),o=function(e,t){if(n(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{a=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),a(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:a(e,r),e}}({},!1):void 0),check:o}},"97a1":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"view-wrap"},[r("filter-view",{attrs:{"filter-form":e.objFilterForm,"filter-button":e.arrFilterButton},on:{filter:e.reqTableDataList,add:function(t){return e.handleDialogDisplay()}}}),r("table-view",{attrs:{"default-expand-all":!0,"table-query":e.objQuery,"table-data":e.arrTable},on:{refresh:e.reqTableDataList}},[r("el-table-column",{attrs:{prop:"title",label:"标题"}}),r("el-table-column",{attrs:{prop:"path",label:"路径"}}),r("el-table-column",{attrs:{prop:"component",label:"组件"}}),r("el-table-column",{attrs:{prop:"hidden",label:"是否隐藏"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.hidden?"是":"否"))])]}}])}),r("el-table-column",{attrs:{prop:"sort",label:"排序"}}),r("el-table-column",{attrs:{prop:"created_at",label:"创建日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("filterDate")(t.row.created_at)))])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{disabled:"INIT"===t.row.source,type:"text",size:"mini"},on:{click:function(r){return e.handleDialogDisplay({type:"edit",data:t.row})}}},[e._v("编辑")]),r("el-button",{attrs:{disabled:"INIT"===t.row.source,loading:t.row.isDelLoading,type:"text",size:"mini"},on:{click:function(r){return e.handleDelete(t.row,"isDelLoading")}}},[e._v("删除")])]}}])})],1),r("details-drawer",{attrs:{display:e.objDialog.is,data:e.objDialog},on:{refresh:e.reqTableDataList,"update:display":function(t){return e.$set(e.objDialog,"is",t)}}})],1)},n=[],o=(r("8e6e"),r("456d"),r("ac6a"),r("bd86")),l=r("bc5f"),i=r("9e25"),s=r("598d"),c=r("a2bf");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={name:"AdminMenu",mixins:[s["default"],i["a"],l["a"]],created:function(){this.reqTableDataList()},methods:{beforeDialogShow:function(){var e=this;return this.$curl(this.$appConst._REQ_MENU_ROUTE_LIST).then((function(t){return e.$set(e.objDialog,"arrMenu",t||[]),Promise.resolve()})).catch((function(){return Promise.reject()}))},reqTableDataList:function(e){var t=this,r=this.$verify.input(this.objFilterForm);this.objQuery.isLoading=!0,this.$curl(this.$appConst._REQ_MENU_ROUTE_LIST,d({},this.objQuery,{},r)).then((function(e){t.arrTable=t.formatData(JSON.parse(JSON.stringify(e)))})).toast().finally((function(){"function"===typeof e&&e(),t.objQuery.isLoading=!1}))},formatData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach((function(r,a){e.forEach((function(e){r.father===e._id&&(e.children?e.children.push(r):e.children=[r],t.push(a))}))})),t.forEach((function(t,r){e.splice(t-r,1)})),e},handleDelete:function(e,t){var r=this,a=e._id,n=e.title;this.$confirm("确定删除菜单： ".concat(n," ?"),"温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r.$set(e,t,!0),r.$curl(r.$appConst._DO_DELETE_MENU_ROUTE,{id:a}).then((function(){r.$modal.toast("删除账号成功","success"),r.reqTableDataList()})).toast().finally((function(){return e[t]=!1}))})).null()}},components:{DetailsDrawer:c["default"]}},f=p,b=r("2877"),m=Object(b["a"])(f,a,n,!1,null,null,null);t["default"]=m.exports},"9e25":function(e,t,r){"use strict";r("3b2b"),r("a481");var a={formatDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy-MM-dd hh:mm:ss",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return e}},n={filterDate:function(e){return e?a.formatDate("yyyy-MM-dd hh:mm:ss",new Date(e)):""}};t["a"]={filters:n}},a2bf:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-drawer",{ref:"drawer",staticClass:"drawer-view",attrs:{title:"add"===e.data.type?"新增菜单":"编辑菜单","before-close":e.handleClose,visible:e.display,direction:"rtl",size:"50%","custom-class":"demo-drawer"},on:{"update:visible":function(t){e.display=t}}},[r("div",{staticClass:"demo-drawer__content"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{attrs:{clearable:"",maxlength:"20",placeholder:"菜单标题"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title","string"===typeof t?t.trim():t)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"路径",prop:"path"}},[r("el-input",{attrs:{clearable:"",placeholder:"请求路径，例：admin"},model:{value:e.ruleForm.path,callback:function(t){e.$set(e.ruleForm,"path","string"===typeof t?t.trim():t)},expression:"ruleForm.path"}})],1),r("el-form-item",{attrs:{label:"排序",prop:"sort"}},[r("el-input",{attrs:{clearable:"",placeholder:"排序，越大排在前面"},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort","string"===typeof t?t.trim():t)},expression:"ruleForm.sort"}})],1),r("el-form-item",{attrs:{label:"组件",prop:"component"}},[r("el-input",{attrs:{clearable:"",placeholder:"对应组件目录，例：admin/user"},model:{value:e.ruleForm.component,callback:function(t){e.$set(e.ruleForm,"component","string"===typeof t?t.trim():t)},expression:"ruleForm.component"}})],1),r("el-form-item",{attrs:{label:"图标",prop:"icon"}},[r("el-input",{attrs:{clearable:"",placeholder:"菜单图标"},model:{value:e.ruleForm.icon,callback:function(t){e.$set(e.ruleForm,"icon","string"===typeof t?t.trim():t)},expression:"ruleForm.icon"}})],1),r("el-form-item",{attrs:{label:"重定向",prop:"redirect"}},[r("el-input",{attrs:{clearable:"",placeholder:"重定向路径，例：admin/user"},model:{value:e.ruleForm.redirect,callback:function(t){e.$set(e.ruleForm,"redirect","string"===typeof t?t.trim():t)},expression:"ruleForm.redirect"}})],1),r("el-form-item",{attrs:{label:"参数",prop:"params"}},[r("el-input",{attrs:{clearable:"",placeholder:"初始化参数"},model:{value:e.ruleForm.params,callback:function(t){e.$set(e.ruleForm,"params","string"===typeof t?t.trim():t)},expression:"ruleForm.params"}})],1),r("el-form-item",{attrs:{label:"父路由",prop:"father"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择父菜单"},model:{value:e.ruleForm.father,callback:function(t){e.$set(e.ruleForm,"father",t)},expression:"ruleForm.father"}},e._l(e.data.arrMenu,(function(e,t){return r("el-option",{key:t,attrs:{label:e.title,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"是否隐藏",prop:"hidden"}},[r("el-switch",{model:{value:e.ruleForm.hidden,callback:function(t){e.$set(e.ruleForm,"hidden",t)},expression:"ruleForm.hidden"}})],1)],1)],1),r("div",{staticClass:"demo-drawer__footer"},[r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v(e._s(e.loading?"提交中...":"确认"))]),r("el-button",{on:{click:e.handleClose}},[e._v("关闭")])],1)])},n=[],o=(r("8e6e"),r("ac6a"),r("456d"),r("bd86"));function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s={data:function(){return{loading:!1,ruleForm:{title:"",path:"",params:"",father:null,sort:"",component:"",redirect:"",icon:"",hidden:!1},rules:{title:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],path:[{required:!0,message:"请填写路径",trigger:"blur"}],component:[{required:!0,message:"请填写组件",trigger:"blur"}],sort:[{required:!0,message:"请填写排序",trigger:"blur"}]}}},watch:{display:function(e){e&&this.assignmentData()}},props:{display:{default:!1},data:{default:""}},methods:{handleClose:function(){this.$emit("update:display",!1),this.$refs.ruleForm.resetFields()},handleSubmit:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;e.loading=!0;var r=e.data,a=r.type;r.data;e.$curl("add"===a?e.$appConst._DO_CREATE_MENU_ROUTE:e.$appConst._DO_UPDATE_MENU_ROUTE,e.ruleForm).then((function(t){e.$modal.toast("add"===a?"新增成功":"编辑成功","success"),e.$emit("refresh"),e.handleClose()})).toast().finally((function(){return e.loading=!1}))}))},assignmentData:function(){var e=this;this.$nextTick((function(){e.$refs.ruleForm.resetFields();var t=e.data.data;t&&(e.ruleForm=i({},e.ruleForm,{},t,{id:t._id}))}))}}},c=s,u=r("2877"),d=Object(u["a"])(c,a,n,!1,null,null,null);t["default"]=d.exports},bc5f:function(e,t,r){"use strict";r("8e6e"),r("ac6a"),r("456d");var a=r("bd86");function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=function(){return{objDialog:{is:!1,type:"add",data:""}}},i={handleDialogDisplay:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"add",data:""},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"objDialog";if(this.beforeDialogShow)return this.beforeDialogShow().then((function(){return e[r]=o({},e[r],{is:!0},t||{})}));this[r]=o({},this[r],{is:!0},t||{})}};t["a"]={data:l,methods:i}}}]);